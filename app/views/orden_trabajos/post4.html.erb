<!-- 🔹 Encabezado fijo -->
<div class="d-flex justify-content-around bg-primary sticky-top my-3 text-white flex-wrap">
  <div><h1 class="mt-1"><strong>Duplo</strong></h1></div>
  <div><h1 class="mt-1"><strong>Cosedora Hilo</strong></h1></div>
  <div><h1 class="mt-1"><strong>Binder</strong></h1></div>
</div>

<!-- 🔸 Contenedor principal -->
<div class="d-flex justify-content-around flex-wrap">

  <!-- 🟩 Tabla Duplo -->
  <div class="container col-md-4 mb-3">
    <table class="table table-striped table-bordered shadow-sm">
      <thead class="bg-dark text-white text-center">
        <tr>
          <th>OT</th>
          <th>Cliente</th>
          <th>Producto</th>
          <th>Observación</th>
          <th>Fecha límite</th>
        </tr>
      </thead>
      <tbody>
        <% @orden_trabajos.each do |orden_trabajo| %>
          <% if orden_trabajo.estado_actual == "Terminación" && cadenatovector(orden_trabajo.procesos).include?("Duplo") %>
            <tr>
              <% case orden_trabajo.priority
                 when "Alta" %>
                   <td style="background-color:#FF0000;"><strong><%= orden_trabajo.trnum %></strong></td>
                 <% when "Media" %>
                   <td style="background-color:#FFFF00;"><strong><%= orden_trabajo.trnum %></strong></td>
                 <% else %>
                   <td style="background-color:#7CFC00;"><strong><%= orden_trabajo.trnum %></strong></td>
              <% end %>
              <td><%= orden_trabajo.clinom %></td>
              <td><%= orden_trabajo.nomprod.first(20) %></td>
              <td><%= truncate(orden_trabajo.observaciones, length: 50) %></td>
              <td><strong><%= orden_trabajo.deadline.try(:strftime, "%d-%m-%Y") %></strong></td>
            </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>
  </div>

  <!-- 🟨 Tabla Cosedora Hilo -->
  <div class="container col-md-4 mb-3">
    <table class="table table-striped table-bordered shadow-sm">
      <thead class="bg-dark text-white text-center">
        <tr>
          <th>OT</th>
          <th>Cliente</th>
          <th>Producto</th>
          <th>Observación</th>
          <th>Fecha límite</th>
        </tr>
      </thead>
      <tbody>
        <% @orden_trabajos.each do |orden_trabajo| %>
          <% if orden_trabajo.estado_actual == "Terminación" && cadenatovector(orden_trabajo.procesos).include?("C.Hilo") %>
            <tr>
              <% case orden_trabajo.priority
                 when "Alta" %>
                   <td style="background-color:#FF0000;"><strong><%= orden_trabajo.trnum %></strong></td>
                 <% when "Media" %>
                   <td style="background-color:#FFFF00;"><strong><%= orden_trabajo.trnum %></strong></td>
                 <% else %>
                   <td style="background-color:#7CFC00;"><strong><%= orden_trabajo.trnum %></strong></td>
              <% end %>
              <td><%= orden_trabajo.clinom %></td>
              <td><%= orden_trabajo.nomprod.first(20) %></td>
              <td><%= truncate(orden_trabajo.observaciones, length: 50) %></td>
              <td><strong><%= orden_trabajo.deadline.try(:strftime, "%d-%m-%Y") %></strong></td>
            </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>
  </div>

  <!-- 🟦 Tabla Binder -->
  <div class="container col-md-4 mb-3">
    <table class="table table-striped table-bordered shadow-sm">
      <thead class="bg-dark text-white text-center">
        <tr>
          <th>OT</th>
          <th>Cliente</th>
          <th>Producto</th>
          <th>Observación</th>
          <th>Fecha límite</th>
        </tr>
      </thead>
      <tbody>
        <% @orden_trabajos.each do |orden_trabajo| %>
          <% if orden_trabajo.estado_actual == "Terminación" && cadenatovector(orden_trabajo.procesos).include?("Binder") %>
            <tr>
              <% case orden_trabajo.priority
                 when "Alta" %>
                   <td style="background-color:#FF0000;"><strong><%= orden_trabajo.trnum %></strong></td>
                 <% when "Media" %>
                   <td style="background-color:#FFFF00;"><strong><%= orden_trabajo.trnum %></strong></td>
                 <% else %>
                   <td style="background-color:#7CFC00;"><strong><%= orden_trabajo.trnum %></strong></td>
              <% end %>
              <td><%= orden_trabajo.clinom %></td>
              <td><%= orden_trabajo.nomprod.first(20) %></td>
              <td><%= truncate(orden_trabajo.observaciones, length: 50) %></td>
              <td><strong><%= orden_trabajo.deadline.try(:strftime, "%d-%m-%Y") %></strong></td>
            </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>
  </div>

</div>

<!-- ⚙️ Auto-scroll y redirección -->
<script>
  // Scroll automático (baja y sube suavemente)
  setInterval(() => {
    window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
    setTimeout(() => window.scrollTo({ top: 0, behavior: "smooth" }), 2000);
  }, 20000);

  // Redirección automática a los 25 segundos
  setTimeout(() => {
    window.location.href = 'http://planillaot.herokuapp.com/post5';
  }, 25000);
</script>
